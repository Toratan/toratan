<div class="pull-left" id="exp-nav" style="width: 100%;margin: -10px">
    <h3>&nbsp;</h3>
    <ul class="nav nav-pills nav-stacked">
        <li class="active">
            <a id='root' user-data="" href="/frame/e" target="explorer-frame"><span class="glyphicon glyphicon-th-large"></span> Root</a>
        </li>
        <li>
            <a id='archives' user-data="!/archives" href='/archives' target="explorer-frame"><span class="glyphicon glyphicon-floppy-disk"></span> Archives</a>
        </li>
        <li>
            <a id='shared' user-data="!/shared" href='/shared' target="explorer-frame"><span class="glyphicon glyphicon-share-alt"></span> Shared</a>
        </li>
        <li>
            <a id='trashes' user-data="!/trashes" href='/trashes' target="explorer-frame"><span class="glyphicon glyphicon-trash"></span> Trashes</a>
        </li>
    </ul>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $("div#exp-nav ul.nav li a[target='explorer-frame']").click(function(){
            window.top.active_nav($(this).attr('id'));
            window.top.location.hash = $(this).attr('user-data');
        });
        window.top.active_nav = function(id) {
            $(window.top.document.getElementById('explorer-nav-frame')).contents().find("div#exp-nav ul.nav li a[target='explorer-frame']").parent().removeClass("active");
            $(window.top.document.getElementById('explorer-nav-frame')).contents().find("div#exp-nav ul.nav li a[target='explorer-frame']#"+id).parent().addClass("active");
        };
        window.top.getActiveType = function() {
            return String($(window.top.document.getElementById('explorer-nav-frame')).contents().find("div#exp-nav ul.nav li.active").find("a").attr("id")).toLowerCase();
        };
        window.top.getActiveNavHtml = function() {
            var $anh = $(window.top.document.getElementById('explorer-nav-frame')).contents().find("div#exp-nav ul.nav li.active a[target='explorer-frame']").clone();
            return $anh.removeAttr("user-data")
                    .removeAttr("target")
                        .wrap('<p/>').parent().html();
        };
        try {
            var uri = 'root';
            var postFix = '';
            var defURI = "/frame/e";
            if(window.location.hash.length === 0) window.location.hash ="#!"+defURI;
            if(window.location.hash.split('#!/')[1] !== undefined) {
                var __uri = String(window.location.hash.split('#!/')[1]).split("/");
                if(__uri.length && __uri[0].length)
                    uri = __uri[0];
            }
            switch(uri) {
                default:
                    window.location.hash ="#!"+defURI;
                case "d":
                case "root":
                case "frame":
                    uri = 'root';
                case "shared":
                case "trashes":
                case "archives":
                    var target = window.location.hash.split('#!')[1];
                    if(!target.match(/^#\!/ig) || target.length === 0 || target === "/")
                        target = defURI;
                    window.top.active_nav(uri);
                    window.top.document.getElementById('explorer-frame').src = target;
                    break;
            }
        } catch(e) {
            window.top.open_errorModal("<span class='glyphicon glyphicon-remove'></span> "+e);
        }
    });
</script>