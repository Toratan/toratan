<?php if(!@$this->view->profile) throw new \zinux\kernel\exceptions\invalidArgumentException("Not profile instance provided...."); ?>
<?php $active_type = strtolower(@$this->view->active_type);
    switch($active_type) {
        case "about": case "posts": break;
        default: $active_type = "about";
    }
?>
<?php $is_profile_owner = (@\core\db\models\user::GetInstance()->user_id == $this->view->profile->user_id); ?>
<?php list($avatar_uri , $def_avatar) = \core\ui\html\avatar::get_avatar_link($this->view->profile->user_id); ?>
<?php $glayout = new \modules\defaultModule\views\layout\genLayoutHeader($this); ?>
<?php $glayout->render_header(); ?>
<style type="text/css">
    #cover-photo {
        background: url('<?php echo '/access/img/upload/cover/14.jpg'; ?>') no-repeat center center ;
        background-size: 100%;
        height: 100%;
    }
</style>
<div class="container-fluid" style="width: 77%">
    <div class="container-fluid" style="border-radius: 4px;border: 1px solid #eee;padding: 4px;height: 430px;">
        <div id="cover-photo"></div>
    </div>
    <link rel="stylesheet" href="/access/css/mosaic.css" type="text/css" media="screen">
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <ul class="nav navbar-nav ">
                <li style="position: static;z-index: 200;margin-top: -230px;">
                    <div class="mosaic-block bottom-bar img-thumbnail" style="background-color: transparent">
                    <?php if($is_profile_owner) : ?>
                        <a href="/profile/avatar"  class="mosaic-overlay" style="display: inline; left: 0px; bottom: -50px;">
                            <div class="details text-center ">
                                <h1><span class="glyphicon glyphicon-picture"></span><br /><b>Change Avatar</b></h1>
                            </div>
                        </a>
                    <?php endif ; ?>
                        <a href="/profile/avatar/view/<?php echo $this->view->profile->user_id, "?", \zinux\kernel\security\security::GetHashString(array($this->view->profile->user_id)) ?>" target="__blank">
                            <img id="thumbnail" width="200" height="200" class='img-responsive img-thumbnail' src="<?php echo $avatar_uri ?>" onerror="this.src='<?php echo $def_avatar ?>';"  />
                        </a>
                    </div>
                </li>
                <li class="<?php echo $active_type === "about" ? "active" : "" ?>">
                    <a href="/profile/about">
                        <b>About</b>
                    </a>
                </li>
                <li class="<?php echo $active_type === "posts" ? "active" : "" ?>">
                    <a href="/profile/posts">
                        <b>Posts</b>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <?php echo $this->content?>
    </div>
</div> <!-- /container -->
<?php $glayout->render_footer(); ?>