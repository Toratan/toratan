<?php if(!@$this->view->profile) throw new \zinux\kernel\exceptions\invalidArgumentException("Not profile instance provided...."); ?>
<?php $is_profile_owner = @$this->view->is_owner;  ?>
<?php $is_preview_mode = @$this->view->preview_mode;  ?>
<?php $active_type = strtolower(@$this->view->active_type);
    switch($active_type) {
        case "about": case "posts": break;
        default: $active_type = "about";
    }
?>
<?php $glayout = new \modules\defaultModule\views\layout\genLayoutHeader($this); ?>
<?php $glayout->render_header(); ?>
<style type="text/css">
    #cover-photo img{
        max-height: 410px;
        width: 100%;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
        border-bottom: 0;
    }
    .navbar-static-top{border-left: 1px solid #DDDDDD; border-right: 1px solid #DDDDDD; margin-top:-10px;}
</style>
<link rel="stylesheet" href="/access/css/mosaic.css" type="text/css" media="screen">
<style type="text/css">
    .icenter-block { float: none; display: -moz-inline-stack; display:inline-block; vertical-align:top; *display:inline; background-color:transparent; }
    .cover-ajax-wait {
        background-color: #FFF;
        margin-left: 10%
    }
</style>
<div class="container" style='padding: 0'>
    <div id="cover-photo">
        <div class='mosaic-block bottom-bar icenter-block'>
        <?php if($is_profile_owner) : ?>
            <a href="/profile/cover"  class="mosaic-overlay" id="change-cover" style="display: inline; left: 0px; bottom: -45px;">
                <div style="height: 3px;" class="cover-ajax-wait"></div>
                <div class="details text-center" style="margin-top: 0;">
                    <h1><span class="glyphicon glyphicon-picture"></span><br /><b>Change Cover</b></h1>
                </div>
            </a>
        <?php endif ; ?>
            <img src="<?php echo '/access/img/upload/cover/bc164218f758cd3a59cd5f1cb98fd0563a327f69_2.jpg'; ?>" class="image imageblock img-responsive img-thumbnail" style=""/>
        </div>
    </div>
    <nav class="navbar navbar-default navbar-static-top" role="navigation" >
        <div class="container-fluid">
            <ul class="nav navbar-nav">
                <li class="<?php echo $active_type === "about" ? "active" : "" ?>">
                    <a href="/profile/<?php echo $is_preview_mode?"preview/":""?>about">
                        <span class="glyphicon glyphicon-map-marker"></span> <b>About</b>
                    </a>
                </li>
                <li class="<?php echo $active_type === "posts" ? "active" : "" ?>">
                    <a href="/profile/<?php echo $is_preview_mode?"preview/":""?>posts">
                        <span class="glyphicon glyphicon-book"></span> <b>Posts</b>
                    </a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right" style="margin-right: 0px;">
<?php if(!$is_profile_owner): ?>
                <li title="Send Message">
                    <a href="<?php echo $is_preview_mode?"#": "#message"?>"><span class="glyphicon glyphicon-envelope"></span> Message</a>
                </li>
                <li title="Follow">
                    <a href="<?php echo $is_preview_mode?"#": "#follow"?>"><span class="glyphicon glyphicon-plus"></span> Follow</a>
                </li>
<?php elseif($active_type === "about"): ?>
                <li title='Edit Profile'>
                    <a href='/profile/edit'><span class='glyphicon glyphicon-pencil'></span> Edit</a>
                </li>
                <li title='View your public profile'>
                    <a href='/profile/preview'><span class='glyphicon glyphicon-eye-open'></span> Preview</a>
                </li>
<?php endif; ?>
<?php if($is_preview_mode): ?>
                <li title='Go back to your profile' class="active">
                    <a href='/profile' target=""><span class='glyphicon glyphicon-eye-close'></span> Exit Preview</a>
                </li>
<?php endif;  ?>
            </ul>
        </div>
    </nav>
    <div class="container">
        <?php echo $this->content?>
    </div>
</div> <!-- /container -->
<script type="text/javascript">
    (function(){
        $("a#change-cover").click(function(e){
            e.preventDefault();
            $.ajax({
                url: $(this).attr('href'),
                data: "ajax=1",
                success: function(data) {
                    console.log(data);
                }
            });
        });
    })(jQuery);
</script>
<?php $glayout->render_footer(); ?>