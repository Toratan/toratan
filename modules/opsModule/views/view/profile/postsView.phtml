<?php if(!isset($this->posts)) throw new zinux\kernel\exceptions\invalidArgumentException("No `\$posts` arg. supplied"); ?>
<style type='text/css'>
 /*!
Theme Name: Surreal CMS
Theme URI: http://www.surrealcms.com/blog/
Description: Surreal CMS blog
Author: A Beautiful Site, LLC.
Version: 5.1
Tags: custom
*/body.has-admin-bar header{top:32px}@media screen and (max-width:782px){body.has-admin-bar{padding-top:0}body.has-admin-bar header{position:static}}.blog-preview{position:relative;padding-left:120px;margin:100px 0}.blog-preview:first-child{margin-top:0}.blog-preview .blog-preview-excerpt{margin:1em 0;text-align:justify}.blog-preview .blog-preview-meta{position:absolute;top:0;left:0;width:100px;text-align:right;color:#a2aab1}.blog-preview .blog-preview-meta .day{font-size:140%;display:block}.blog-preview .blog-preview-meta .year{font-size:110%;color:#ccd0d4;display:block;margin-top:-8px}.blog-date{color:#a2aab1}.blog-article img{max-width:100%;height:auto}.blog-article .alignleft,.blog-article img.alignleft{display:inline;float:left;margin-right:24px;margin-top:4px;margin-bottom:1em}.blog-article .alignright,.blog-article img.alignright{display:inline;float:right;margin-left:24px;margin-top:4px;margin-bottom:1em}.blog-article .aligncenter,.blog-article img.aligncenter{clear:both;display:block;margin:2em auto}.blog-footer{text-align:center;margin-top:100px}.blog-comments{margin-top:100px}.blog-pagination{border-top:solid 1px #ebebeb;padding-top:50px;margin-top:50px}.blog-pagination:after{content:' ';visibility:hidden;display:block;clear:both}.blog-pagination .next{float:right}.blog-pagination .prev{float:left}.blog-page-title{border:none;margin-bottom:0}.blog-search{margin:0}@media screen and (max-width:767px){.blog-preview{padding-left:0;margin:50px 0}.blog-preview .blog-preview-meta{position:static;text-align:left}.blog-preview .blog-preview-meta .day,.blog-preview .blog-preview-meta .year{color:#a2aab1;font-size:100%;margin:0;display:inline}.blog-preview .blog-preview-meta .day:after{content:', '}}
</style>
<div class="container col-lg-9  col-md-9  col-sm-12">
<?php foreach($this->posts as $post): $udate = strtotime($post->updated_at); ?>
    <div class="row">
        <article class="blog-preview">
            <h3 class="text-justify"><?php echo $post->note_title ?></h3>
            <div class="blog-preview-meta">
                <span class="day"><?php echo date("M d", $udate) ?></span>
                <span class="year"><?php echo date("Y", $udate) ?></span>
            </div>
            <div class="blog-preview-excerpt"><?php 
                        $bs = substr($post->note_body, 0, strrpos($post->note_body, ' '));
                        if(!strlen($bs))
                            $bs = "{$post->note_body}[...]";
                        else $bs = "$bs...";
                        $doc = new DOMDocument();
                        @$doc->loadHTML("$bs<pFUC K");
                        \modules\opsModule\models\noteViewModel::__renderText($doc->saveHTML());
            ?></div>
            <p>
                <a class="btn btn-sm btn-primary" href="/view/note/<?php echo $post->note_id ?>">View article</a>
            </p>
	</article>
    </div>
<?php endforeach; ?>
</div>