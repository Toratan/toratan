<?php if(!isset($this->posts)) throw new zinux\kernel\exceptions\invalidArgumentException("No `\$posts` arg. supplied"); ?>
<style type='text/css'>.blog-preview{position:relative;padding-left:120px;margin:100px 0}.blog-preview:first-child{margin-top:0}.blog-preview .blog-preview-excerpt{margin:1em 0;text-align:justify}.blog-preview .blog-preview-meta{position:absolute;top:0;left:0;width:100px;text-align:right;color:#a2aab1}.blog-preview .blog-preview-meta .day{font-size:140%;display:block}.blog-preview .blog-preview-meta .year{font-size:110%;color:#ccd0d4;display:block;margin-top:-8px}@media screen and (max-width:767px){.blog-preview{padding-left:0;margin:50px 0}.blog-preview .blog-preview-meta{position:static;text-align:left}.blog-preview .blog-preview-meta .day,.blog-preview .blog-preview-meta .year{color:#a2aab1;font-size:100%;margin:0;display:inline}.blog-preview .blog-preview-meta .day:after{content:', '}}</style>
<div class="container col-lg-9  col-md-9  col-sm-12">
<?php foreach($this->posts as $post): $udate = strtotime($post->updated_at); ?>
    <div class="row">
        <article class="blog-preview">
            <h3 class="text-justify"><?php echo $post->note_title ?></h3>
            <div class="blog-preview-meta">
                <span class="day"><?php echo date("M d", $udate) ?></span>
                <span class="year"><?php echo date("Y", $udate) ?></span>
            </div>
            <div class="blog-preview-excerpt"><?php 
                        $bs = substr($post->note_body, 0, strrpos($post->note_body, ' '));
                        if(!strlen($bs))
                            $bs = "{$post->note_body}[...]";
                        else $bs = "$bs...";
                        $doc = new DOMDocument();
                        @$doc->loadHTML("$bs<pFUC K");
                        \modules\opsModule\models\noteViewModel::__renderText($doc->saveHTML());
            ?></div>
            <p>
                <a class="btn btn-sm btn-primary" href="/view/note/<?php echo $post->note_id ?>">View article</a>
            </p>
	</article>
    </div>
<?php endforeach; ?>
</div>